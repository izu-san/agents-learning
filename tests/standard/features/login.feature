Feature: ログイン

  Scenario: 既存ユーザでログイン成功（プレミアム会員）
    Given 新しいブラウザ状態でログインページを開く
    Then メールとパスワードの入力欄とログインボタンが表示される
    When "premium" ユーザでログインする
    Then マイページに遷移する
    And 会員ランクが "premium" と表示される
    And ナビゲーションに「ログアウト」が表示される
    And 画面全体のビジュアルスナップショットを保存・比較する

  Scenario: ログイン失敗（未入力/誤入力）
    Given 新しいブラウザ状態でログインページを開く
    When メールとパスワード未入力でログインする
    Then ログインページのままである
    And 必須入力のバリデーションが表示される
    When 不正なメール形式と誤ったパスワードでログインする
    Then ログインページのままである
    And 認証エラーが通知される

  Scenario: アクセシビリティ：ラベル/必須/エラーの関連付け
    Given 新しいブラウザ状態でログインページを開く
    Then ログイン入力欄にラベルが関連付けられている
    When メールとパスワード未入力でログインする
    Then エラーメッセージが入力欄と関連付けられている
